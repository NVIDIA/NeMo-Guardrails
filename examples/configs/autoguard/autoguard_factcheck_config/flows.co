define subflow input autoguard factcheck
    execute autoguard_retrieve_relevant_chunks
    $input_result = execute autoguard_factcheck_input_api

define subflow output autoguard factcheck
    execute autoguard_retrieve_relevant_chunks
    $output_result = execute autoguard_factcheck_output_api
    if $input_result < 0.5
        bot inform autoguard factcheck input violation
    if $output_result < 0.5
        bot inform autoguard factcheck output violation
        stop

define bot inform autoguard factcheck input violation
    "Factcheck violation in user input has been detected by AutoGuard."

define bot inform autoguard factcheck output violation
    "Factcheck violation in llm response has been detected by AutoGuard."
